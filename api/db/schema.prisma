datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider      = "prisma-client-js"
  binaryTargets = "native"
}

model User {
  id                  Int       @id @default(autoincrement())
  name                String?
  email               String    @unique
  hashedPassword      String
  salt                String
  resetToken          String?
  bookings            Booking[]
  resetTokenExpiresAt DateTime?
  roles               String    @default("user")
}

model Equipment {
  id          Int                    @id @default(autoincrement())
  name        String
  description String?
  bookings    BookingsOnEquipments[]
  createdAt   DateTime               @default(now())
  category    String
}

model Booking {
  id            Int                    @id @default(autoincrement())
  startTime     DateTime
  endTime       DateTime
  equipments    BookingsOnEquipments[]
  user          User                   @relation(fields: [userId], references: [id])
  userId        Int
  createdAt     DateTime               @default(now())
  producerName  String
  producerEmail String
  directorName  String
  projectName   String
  extraComments String
  approval      String                 @default("Pending")
}

model BookingsOnEquipments {
  booking     Booking   @relation(fields: [bookingId], references: [id])
  bookingId   Int // relation scalar field (used in the `@relation` attribute above)
  equipment   Equipment @relation(fields: [equipmentId], references: [id])
  equipmentId Int // relation scalar field (used in the `@relation` attribute above)
  assignedAt  DateTime  @default(now())

  @@id([bookingId, equipmentId])
}

model Video {
  id          Int      @id @default(autoincrement())
  title       String
  description String?
  vimeoUrl    String
  createdAt   DateTime @default(now())
  credits     String
  category    String
  featured    Boolean  @default(false)
}

model ContactFormResponse {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  email     String
  message   String
}
